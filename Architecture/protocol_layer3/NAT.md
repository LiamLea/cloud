# NAT

[toc]

### 概述

#### 1.NAT Translation Table

通过NAT 转换表，进行地址映射（包括请求包和回复包）

##### （1）现在的协议大部分都是有状态的协议
* 比如基于连接的协议
* 无连接的协议，可以基于id，比如ICMP

##### （2）映射记录
* 对于有连接的协议（TCP），通过 ip+port 进行映射
  * 会在本机随机开启一个端口，连接远程机器，然后会把根据 ip+port 添加映射记录
* 对于无连接的协议（ICMP），通过 ip+id 进行映射
  * 比如ICMP协议中会有一个id字段，标识本次所有的icmp包，所以本机可以根据 ip+id 添加映射记录
